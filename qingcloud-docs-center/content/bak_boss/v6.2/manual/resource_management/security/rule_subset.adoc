---
title: "规则子集"
weight: 2
---


== 背景信息

管理员或用户可以创建多个安全组，初始状态下，每个安全组都不包含任何规则，也就是说任何端口都是封闭的，用户或管理员需要建立规则以打开相应的端口。

规则子集是一组安全规则的集合，用户可以依据自身业务将安全策略分为多组。使用安全组策略时，可通过绑定规则子集的方式来实现多组安全策略的批量引用，绑定后该安全组将会应用子集内的所有规则。每个安全组最多可同时绑定 `10` 个规则子集。使用限制说明如下。

* 用户或管理员在 BOSS 创建的规则子集，不是全局适用的，仅该用户所建的安全组可用。
* 管理员在 BOSS 创建的全局规则子集，将应用于所有{platform_name_cn}用户的所有安全组。
* 全局规则子集一旦创建，已存在的安全组都会加入全局规则子集的规则，用户在新建安全组时，也会加入，且对全局中的规则不能修改。管理员如果对全局规则子集作了修改，BOSS 可以查看全局规则子集的变化，但不会自动生效，需要用户进入各安全组点击 `应用确认`，已有安全组才会生效全局规则子集的更改。
* 非管理员用户对于全局规则子集，仅拥有 `只读` 权限，不具备操作权限。在用户创建虚机等资源时强行绑定安全组，用户可根据需求自主创建新的安全组，并配置优先级更高的规则以达到开放端口的目的。


规则子集应用流程如下。 

image::/images/boss/manual/resource_mgt/rule_subset_process.png[]


== 功能描述

规则子集页面展示当前云环境中所有规则子集的名称及 ID、用户邮箱及 ID、修改应用状态、所属项目、是否全局规则、创建时间信息。该文档用于指导管理员进入如何进入操作规则子集。



== 操作步骤

=== 查看规则子集列表

. 使用浏览器登录 BOSS。

. 选择**资源管理** > **安全** > **规则子集**，进入规则子集列表页面。
+
image::/images/boss/manual/resource_mgt/rule_subset_operation.png[]


=== 查看规则子集详情

. 承接前文步骤，进入link:#_查看规则子集列表[规则子集列表]页面。

. 输入框内，根据提示信息，搜索目标规则子集，点击目标规则子集的名称，进入规则子集详情页面，查看规则子集详细信息以及绑定的规则列表。
+
image::/images/boss/manual/resource_mgt/rule_subset_2.png[]
+
include::../../../../../_components/note.adoc[]
* **上行规则**是指从{platform_name_cn}的云资源访问外部。
* **下行规则**是指从外部访问{platform_name_cn}的云资源。

include::../../../../../_components/table_footer.adoc[]



=== 创建全局规则子集

仅管理员用户才能创建全局规则子集。

. 进入link:#_查看规则子集列表[规则子集列表]页面，点击右上角的**创建全局规则子集**。

. 弹出**创建全局规则子集**对话框，管理员根据页面提示信息，输入全局规则子集的名称后，点击**创建**。

. 在规则子集列表页面，查看新创建的全局规则子集。


=== 添加规则


. 进入link:#_查看规则子集列表[规则子集列表]页面，点击目标规则子集的名称，进入规则子集详情页面。
. 点击**添加规则**，弹出对话框。
. 用户根据页面提示信息，填写相关参数后，点击**添加**，即可完成规则的添加。页面参数说明如下。
+
[cols="1,3a", options="header"]
|===
| 参数 |说明

|名称 | 安全组规则的名称。
|优先级 |优先级数值越小，优先级越高。取值范围为 0~100。
|方向 |

* `上行规则` 指从云资源访问外部。上行规则和端口默认放行。配置 `上行规则` 中需要填写目标 IP。
* `下行规则` 指从外部访问云资源。未配置的下行规则和端口默认拒绝访问。配置 `下行规则` 中需要填写源 IP。
|行为 | 

* `允许` 放行该端口相应的访问请求。
* `拒绝` 直接丢弃数据包，不会返回任何回应信息。

|协议 |匹配流量的协议类型，可在下拉框内选择目标协议。不同的协议类型，还需配置相应的参数，可根据页面提示信息进行填写。

|===


. 在规则子集详情页面，查看添加的规则。



=== 删除全局规则子集

include::../../../../../_components/note.adoc[]
全局规则子集删除后，该子集彻底删除，并不会作为子集存在，请谨慎操作。

include::../../../../../_components/table_footer.adoc[]

. 进入link:#_查看规则子集列表[规则子集列表]页面，选择目标规则子集，点击**更多操作** > **删除全局规则子集**。

. 输入操作原因，确认操作无误后，点击**删除**。
