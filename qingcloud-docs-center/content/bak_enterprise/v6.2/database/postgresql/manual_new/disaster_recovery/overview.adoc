---
title: "灾备概述"
weight: 1
---

PostgreSQL 集群支持将另一个 PostgreSQL 集群设置为**源集群**，来**实时同步源集群数据**，从而提供集群之间的灾备服务。

include::../../../../../../_components/note.adoc[]
**灾备集群**与**源集群**可位于不同区域，也可位于同一区域，只需保证网络畅通即可。需要注意，若位于不同区域必须保证网络带宽的充足。
include::../../../../../../_components/table_footer.adoc[]

* 启动灾备功能后，**灾备集群**将类似于**源集群**的一个独立备用集群，完全同步**源集群**数据，确保数据的完整性。
* 启动灾备功能后，支持查看**灾备集群**同步进度和灾备参数。
* 当**源集群**所在区域发生突发生自然灾害等状况，**灾备集群**可快速提升为业务集群，及时恢复业务。
* 灾备集群也可作为只读集群，用于分担**源集群**的压力。

== 使用注意

=== 启动灾备前

* **灾备集群**与**源集群**的 PostgreSQL 内核版本必须一致。
* **灾备集群**与**源集群**的应用版本应尽量保持一致。
* **灾备集群**与**源集群**的网络需通畅，可通过link:../../../../../network/border_router/[边界路由器]或 link:../../../../../network/vpc/manual/vpn/vpn_intro[VPN] 等方式打通网络。
* **灾备集群**设置为同步模式时，**源集群**的**主实例必须为 3 节点**，在主从切换时才可以保障源集群的读写稳定性。设置异步时，⽆此限制。
* 灾备集群的规格需与源集群保持⼀致，**不可⼩于源集群的配置规格**。
* 灾备集群的参数设置需与源集群保持⼀致。
* 灾备集群的账⼾设置需与源集群保持⼀致，或是在停⽌灾备后设置灾备集群的账⼾与源集群保持⼀致也可以。
* 基础版与⾼可⽤版本可以互为源集群与灾备集群，不受任何限制。
* 灾备功能可将基础版与⾼可⽤版进⾏版本的转换。例如，当前用户使用基础版本集群，若需替换为高可用版本时，可重新创建高可用版本作为源集群后，将原来的基础版集群作为灾备集群进行数据读取。


=== 启动灾备后

* **灾备集群**与**源集群**的网络环境不支持随意切换，否则可能导致数据丢失。
* **灾备集群**仅支持读取数据，不支持写入数据。高可用版本集群，采用⾼可⽤读 IP 实现数据读取。
* 未停止灾备前，禁止直接删除**灾备集群**。因直接删除**灾备集群**，相当于删除了**源集群**的一个备用节点，可能造成**源集群**业务阻塞，**源集群**上报节点故障。
* 灾备启动后，**灾备集群**只允许启动/关闭/帐号/停⽌灾备操作，其他任何操作均有可能影响稳定性，不允许其他任何操作。
+
include::../../../../../../_components/note.adoc[]
若需进行其他操作，需先停止灾备，操作完成后再启动灾备。
include::../../../../../../_components/table_footer.adoc[]
* 若需扩容**源集群**规格，须先停止灾备，扩容源集群，再扩容灾备集群后，再重新启动灾备。
+
include::../../../../../../_components/attention.adoc[]
灾备集群的配置规格须始终不小于源集群。
include::../../../../../../_components/table_footer.adoc[]
* **启动灾备后**当前集群将作为源集群的灾备集群，则**当前集群中的原有数据将会被清空**。





