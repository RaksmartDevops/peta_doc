




<!DOCTYPE html>
<html lang="zh"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">

<meta name="keywords" content="云计算,青云,QingCloud,文档">



<meta name="description" content="介绍 AppCenter 的 metadata 服务。">

<link rel="icon" href="https://console.petaexpress.com/assets/cdn/hinata/0a234310-78f9-4323-8d59-2b36ac15120a-favicon.ico" type="image/x-icon">

<title>Metadata 服务 - 用户指南</title>
<link href="/css/bulma.css" rel="stylesheet">
<link href="/css/bulma-tooltip.min.css" rel="stylesheet">
<link href="/css/atom-one-light.css" rel="stylesheet" />
<link href="/css/magnific-popup.css" rel="stylesheet" />


<link href="/scss/main.min.e407fb236ca21333e8c63516ab2f144dd2cdbdaf2eca08e58895ff89ce74abc3.css" rel="stylesheet" integrity="sha256-5Af7I2yiEzPoxjUWqy8UTdLNva8uygjliJX/ic50q8M=">

<script src="/js/jquery-2.2.4.js"></script>
<body
        class="root   "
        style=""
        ><header>
  <nav class="navbar">
    
      <a href="/" class="navbar-logo-wrapper">
        <img class="navbar-logo" src="https://console.petaexpress.com/assets/cdn/hinata/ba65c1e6-b7a4-4085-b0e2-23104d8e71e1-logo_en.svg" />
        <div class="navbar-split navbar-left-split">|</div>
        <div class="navbar-logo-text">企业云</div>
      </a>
    
    <div class="navbar-nav">
      <div
        class="navbar-nav-item navbar-nav-version "
        style="display:none;">
        
        <div class="dropdown-trigger">
          <span class="project-version">
            v6.1
          </span>
          
        </div>
        
      </div>
      
    </div>
    <div class="search navbar-search">
      <form action="/v6.1/search/" method="GET">
        <div class="control has-icons-left has-icons-right docs-search-input">
          <span class="icon is-left">
            <img src="/images/icons/magnifier_duotone.svg" />
          </span>
          <input
            class="input"
            name="q"
            type="input"
            placeholder="请输入关键字快速获取帮助"
            autocomplete="off"
          />
          <span class="icon is-right"> </span>
        </div>
        <img class="clear-search-input" src="/images/icons/close_duotone.svg" />
      </form>
      <div class="search-result navbar-search-result">
        <div class="search-result-loading"></div>
        <div class="search-result-content"></div>
        <div class="search-result-none">
          没有找到搜索结果， 请更换关键词重新搜索
        </div>
      </div>
    </div>
    
      
      
        
          <a class="navbar-item-right btn primary-btn navbar-btn "
            target="_blank"
            data-url="https://console.petaexpress.com"
            data-text="控制台"
            href="https://console.petaexpress.com">
            控制台
          </a>
        
      
    
  </nav>
</header><script id="search-result-total-template" type="text/x-js-template">
  <div class="search-result-total">
    共为您找到 ${count} 个结果
  </div>
</script>

<script id="search-result-item-template" type="text/x-js-template">
  <div class="search-result-content-item">
    <div class="search-result-content-item-title">
      <a href="${href}">${title}</a>
    </div>
    <div class="search-result-content-item-content">
      ${content}
    </div>
    <div class="search-result-content-item-ref">
      <ul class="content-breadcrumb">
      </ul>
    </div>
  </div>
</div>
</script>

<script id="search-breadcrumb-template" type="text/x-js-template">
  <li class="icon-slash_fill">
    <a href="${href}">${title}</a>
  </li>
</script>

<script id="search-result-total-template" type="text/x-js-template">
  <div class="search-result-total">
    共为您找到 ${count} 个结果
  </div>
</script>
<script id="search-result-page-template" type="text/x-js-template">
  <nav class="search-result-pagination pagination is-centered">
    <a class="pagination-previous icon-chevron_left_fill"></a>
    <a class="pagination-next icon-chevron_right_fill"></a>
    <ul class="pagination-list">
    </ul>
  </nav>
</script>
<div class="container">

  


  
    
  


<aside class="sidebar-wrapper">
  <div class="sidebar-drag"></div>
  <div class="sidebar">
    
      <div class="sidebar-title" >
        <a href="/v6.1/appcenter/dev-platform/">
          
            应用开发平台
        </a>
        
          <span class="icon-menu_fill"></span>
        
      </div>
      
        <div class="search-sidebar-wrapper">
          
<div class="search search-sidebar">
  <div class="control has-icons-left has-icons-right docs-search-input">
    <span class="icon is-left">
      <img src="/images/icons/magnifier_duotone.svg" />
    </span>
    <input class="input" name="q" type="input" placeholder="请输入关键字快速获取帮助" autocomplete="off" />
    <span class="icon is-right"> </span>
  </div>
  <img class="clear-search-input" src="/images/icons/close_duotone.svg" />
</div>
<div class="search-sidebar-result columns">
  
    <div class="column">
      
        
          <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-computing_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">计算</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/compute/vm/">
      云服务器
    </a>
    
    <a href="/v6.1/compute/hpc/">
      弹性高性能计算 EHPC
    </a>
    
    <a href="/v6.1/compute/image/">
      镜像
    </a>
    
    <a href="/v6.1/compute/ssh/">
      SSH 密钥
    </a>
    
    <a href="/v6.1/compute/instance_group/">
      安置策略组
    </a>
    
    <a href="/v6.1/compute/migration/">
      跨区域迁移
    </a>
    
  </div>
</div>
        
      
        
      
        
      
        
      
        
          <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-database_cache_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">数据库</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/database/mysql/">
      关系型数据库 MySQL Plus
    </a>
    
    <a href="/v6.1/database/postgresql/">
      关系型数据库 PostgreSQL
    </a>
    
    <a href="/v6.1/database/radondb/">
      分布式数据库 RadonDB
    </a>
    
    <a href="/v6.1/database/polondb/">
      分布式数据库 PolonDB
    </a>
    
    <a href="/v6.1/database/chronusdb/">
      时序数据库 ChronusDB
    </a>
    
    <a href="/v6.1/database/mongodb/">
      文档数据库 MongoDB
    </a>
    
    <a href="/v6.1/database/mongodb_cluster/">
      文档数据库 MongoDB Cluster
    </a>
    
    <a href="/v6.1/database/redis_standalone/">
      键值数据库 Redis Standalone
    </a>
    
    <a href="/v6.1/database/redis_cluster/">
      键值数据库 Redis Cluster
    </a>
    
  </div>
</div>
        
      
        
      
        
      
        
      
        
          <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-container_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">容器</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/container/qke_plus/">
      容器引擎 QKE
    </a>
    
    <a href="/v6.1/container/harbor/">
      Harbor 镜像仓库
    </a>
    
  </div>
</div>
        
      
        
      
        
      
        
      
        
          <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-operation_manage_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">运维与管理</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/operation/migration/">
      服务器迁移中心
    </a>
    
    <a href="/v6.1/operation/topology/">
      资源编排
    </a>
    
    <a href="/v6.1/operation/resource/">
      资源管理
    </a>
    
    <a href="/v6.1/operation/autoscaling/">
      自动伸缩
    </a>
    
    <a href="/v6.1/operation/tools/">
      运维工具
    </a>
    
    <a href="/v6.1/operation/vmware/">
      VMware 纳管
    </a>
    
  </div>
</div>
        
      
        
      
    </div>
    <div class="column">
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-storage_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">存储</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/storage/disk/">
      硬盘
    </a>
    
    <a href="/v6.1/storage/backup/">
      备份
    </a>
    
    <a href="/v6.1/storage/object_storage/">
      对象存储
    </a>
    
    <a href="/v6.1/storage/epfs/">
      文件存储 EPFS
    </a>
    
    <a href="/v6.1/storage/vnas/">
      文件存储 vNAS
    </a>
    
    <a href="/v6.1/storage/qfs/">
      文件存储 QFS
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-mq_middleware_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">消息队列与中间件</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/middware/kafka/">
      Kafka 服务
    </a>
    
    <a href="/v6.1/middware/rabbitmq/">
      RabbitMQ 服务
    </a>
    
    <a href="/v6.1/middware/etcd/">
      Etcd 服务
    </a>
    
    <a href="/v6.1/middware/api_gateway/">
      API 网关
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-shield_key_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">安全</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/security/firewall/">
      云防火墙 CFW
    </a>
    
    <a href="/v6.1/security/srp/">
      安全资源池
    </a>
    
    <a href="/v6.1/security/hss/">
      主机安全
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-data_warehouse_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">用户服务</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/services/bill_center/">
      费用中心
    </a>
    
    <a href="/v6.1/services/notification-center/">
      消息中心
    </a>
    
    <a href="/v6.1/services/vdc/">
      企业管理
    </a>
    
  </div>
</div>
      
      
    </div>
    <div class="column">
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-nat_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">网络服务</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/network/vpc/">
      VPC 网络
    </a>
    
    <a href="/v6.1/network/nat_gateway/">
      NAT 网关
    </a>
    
    <a href="/v6.1/network/eip/">
      弹性公网 EIP
    </a>
    
    <a href="/v6.1/network/loadbalancer/">
      负载均衡
    </a>
    
    <a href="/v6.1/network/border_router/">
      边界路由器
    </a>
    
    <a href="/v6.1/network/security_group/">
      安全组
    </a>
    
    <a href="/v6.1/network/acl/">
      网络访问控制
    </a>
    
    <a href="/v6.1/network/mcn/">
      流量牵引服务
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-bigdata_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">大数据服务</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/bigdata/elk/">
      ELK 服务
    </a>
    
    <a href="/v6.1/bigdata/opensearch/">
      OpenSearch 服务
    </a>
    
    <a href="/v6.1/bigdata/zookeeper/">
      ZooKeeper 服务
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-monitor_service_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">监控服务</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/monitor_service/cloudsat/">
      云监控 CloudSat
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
    </div>
    <div class="column">
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-apps_5_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">AppCenter</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/appcenter/market/">
      AppCenter 控制台
    </a>
    
    <a href="/v6.1/appcenter/dev-platform/">
      应用开发平台
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-bi_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">数据仓库与 BI</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/dwh_bi/clickhouse/">
      ClickHouse
    </a>
    
  </div>
</div>
      
      
      
      
      
      
      
      
      
      <div class="search-sidebar-result-item">
  <div class="search-sidebar-result-item-title">
    
    <span class="search-sidebar-result-item-title-icon content-item-title-icon icon-human_gear_duotone">
      <span class="path1"></span>
      <span class="path2"></span>
      <span class="path3"></span>
      <span class="path4"></span>
      <span class="path5"></span>
      <span class="path6"></span>
      <span class="path7"></span>
      <span class="path8"></span>
      <span class="path9"></span>
      <span class="path10"></span>
      <span class="path11"></span>
      <span class="path12"></span>
      <span class="path13"></span>
      <span class="path14"></span>
      <span class="path15"></span>
    </span>
    
    <span class="search-sidebar-result-item-title-text">访问与鉴权</span>
  </div>
  <div class="search-sidebar-result-item-children">
    
    <a href="/v6.1/authorization/iam/">
      访问鉴权管理
    </a>
    
    <a href="/v6.1/authorization/account/">
      账户中心
    </a>
    
    <a href="/v6.1/authorization/access_key/">
      API 密钥
    </a>
    
  </div>
</div>
      
      
      
      
      
      
    </div>
  
</div>
        </div>
      
    
    <nav class="sidebar-menu">
      
        
        <ul>
  
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >产品简介</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/introduction/introduction/">简介</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/introduction/architechure/">系统架构</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >服务商入驻</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/serviceprovider/prerequisite/">入驻须知</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/serviceprovider/contracts/">入驻流程</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >快速入门</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/quick-start/cluster/">云应用入门指南</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/quick-start/quick_start_saas/">SaaS 应用入门指南</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item active ">
            <a >云应用开发指南</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_up_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/management/">应用管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/version_management/">应用版本管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/build/">镜像制作</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item active current">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/metadata-service/">Metadata 服务</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/basic-specifications/">开发模板规范 - 基础版</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/specifications/">开发模板规范 - 完整版</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/lifecycle/">实例生命周期</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/user_management/">用户管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/instance_management/">实例管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/log/">日志管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/debug/">调试指南</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/release_license/">License 应用上架指南</a>
          </li>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >SaaS 应用开发指南</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/saas-flow/">接入流程</a>
          </li>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >平台账户对接</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/account/get_flow/">调用流程</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/account/get_auth_code/">获取授权码</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/account/get_token/">获取 access_token</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/account/check_token/">校验 access_token</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/account/login_console/">免密登录控制台</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >SPI 接口开发</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/interface/spi_overview/">接口概述</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/interface/spi_convention/">接口约定</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/interface/spi_reload/">接口重试机制</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/interface/spi_security/">安全设计</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/saas-developer-guide/release/">应用上架</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/release_api_app/">API 应用上架指南</a>
          </li>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a >平台管理</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/platform-manage/finance/">财务管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/platform-manage/order/">订单管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/platform-manage/tickets/">工单管理</a>
          </li>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/platform-manage/notification/">通知中心</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
          
          <li class="sidebar-item  ">
            <a href="/v6.1/appcenter/dev-platform/cluster-faqs/">常见问题</a>
          </li>
        
      
    
  
</ul>
      
    </nav>

  </div>
</aside>
<div class="content-card-wrapper">
  <div class="content-card">
    <div class="content-wrapper"><ul class="content-breadcrumb">
      <li class="icon-slash_fill"><a href="/v6.1" data-url="/v6.1">用户指南</a></li>
      <li class="icon-slash_fill"><a href="/v6.1/appcenter/dev-platform" data-url="/v6.1/appcenter/dev-platform">应用开发平台</a></li>
        
        <li class="icon-slash_fill"><a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/management/" data-url="/v6.1/appcenter/dev-platform/cluster-developer-guide">云应用开发指南</a></li>
      <li class="icon-slash_fill"><a href="/v6.1/appcenter/dev-platform/cluster-developer-guide/metadata-service" data-url="/v6.1/appcenter/dev-platform/cluster-developer-guide/metadata-service">Metadata 服务</a></li></ul><div class="post-wrapper"><div class="post">
  <h1 class="post-title">
    Metadata 服务</h1>
  <div class="post-info">
    <div class="post-date">
      更新时间：2024-03-07 19:06:53
    </div>
    
    
    
    
    
    
    
      <div
        class="tag post-tag export-pdf has-tooltip-top has-tooltip-arrow"
        data-tooltip="下载范围：所属一级目录的全部内容"
        data-url="/v6.1/appcenter/dev-platform/cluster-developer-guide">
        <span class="icon-format_pdf_2_fill"></span>
        PDF
      </div>
      
    
  </div><div class="post-menu">
  <div class="post-menu-title">本页目录</div>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#_基本信息">基本信息</a></li>
    <li><a href="#_元数据结构">元数据结构</a>
      <ul>
        <li><a href="#_host">host</a></li>
        <li><a href="#_cluster">cluster</a></li>
        <li><a href="#_env">env</a></li>
        <li><a href="#_adding_hosts">adding-hosts</a></li>
        <li><a href="#_deleting_hosts">deleting-hosts</a></li>
        <li><a href="#_links">links</a></li>
        <li><a href="#_cmd">cmd</a></li>
      </ul>
    </li>
    <li><a href="#_测试">测试</a></li>
  </ul>
</nav>
</div><div class="post-content">
    
      
      
<div class="sect1">
<h2 id="_基本信息">基本信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AppCenter 的 metadata service 是在 etcd 基础之上进行了二次开发，主要增加了 self 属性，即每个节点只能从该服务获取到自身相关的信息，如本机 IP、server ID 等，
此项目已在 <a href="https://github.com/yunify/metad">github</a> 上开源。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_元数据结构">元数据结构</h2>
<div class="sectionbody">
<div class="paragraph">
<p>每个应用集群在 metadata server 中存储元信息如下结构：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>/<strong>self</strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>hosts</strong>/<em>[role name]</em>/[instance_id]*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>ip</strong> [IP address]</p>
</li>
<li>
<p>/<strong>eip</strong> [public IP address]</p>
</li>
<li>
<p>/<strong>mac</strong> [MAC address]</p>
</li>
<li>
<p>/<strong>sid</strong> [server ID]</p>
</li>
<li>
<p>/<strong>gid</strong> [group ID]</p>
</li>
<li>
<p>/<strong>gsid</strong> [global server ID]</p>
</li>
<li>
<p>/<strong>node_id</strong> [node ID]</p>
</li>
<li>
<p>/<strong>instance_id</strong> [instance ID]</p>
</li>
<li>
<p>/<strong>cpu</strong> [cpu]</p>
</li>
<li>
<p>/<strong>gpu</strong> [gpu]</p>
</li>
<li>
<p>/<strong>memory</strong> [memory in MiB]</p>
</li>
<li>
<p>/<strong>volume_size</strong> [volume size in GiB]</p>
</li>
<li>
<p>/<strong>instance_class</strong> [instance class]</p>
</li>
<li>
<p>/<strong>gpu_class</strong> [gpu class]</p>
</li>
<li>
<p>/<strong>volume_class</strong> [volume class]</p>
</li>
<li>
<p>/<strong>physical_machine</strong> [ID of the physical machine that hosts the instance]</p>
</li>
<li>
<p>/<strong><em>role</em></strong> [role name]</p>
</li>
<li>
<p>/<strong><em>pub_key</em></strong> [pub key string]</p>
</li>
<li>
<p>/<strong><em>token</em></strong> [token string]</p>
</li>
<li>
<p>/<strong><em>reserved_ips</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[reserved IP name such as vip]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>value</strong> [reserved ip address]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>host</strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>ip</strong> [IP address]</p>
</li>
<li>
<p>/<strong>eip</strong> [public IP address]</p>
</li>
<li>
<p>/<strong>mac</strong> [MAC address]</p>
</li>
<li>
<p>/<strong>sid</strong> [server ID]</p>
</li>
<li>
<p>/<strong>gid</strong> [group ID]</p>
</li>
<li>
<p>/<strong>gsid</strong> [global server ID]</p>
</li>
<li>
<p>/<strong>node_id</strong> [node ID]</p>
</li>
<li>
<p>/<strong>instance_id</strong> [instance ID]</p>
</li>
<li>
<p>/<strong>cpu</strong> [cpu]</p>
</li>
<li>
<p>/<strong>gpu</strong> [gpu]</p>
</li>
<li>
<p>/<strong>memory</strong> [memory in MiB]</p>
</li>
<li>
<p>/<strong>volume_size</strong> [volume size in GiB]</p>
</li>
<li>
<p>/<strong>instance_class</strong> [instance class]</p>
</li>
<li>
<p>/<strong>gpu_class</strong> [gpu class]</p>
</li>
<li>
<p>/<strong>volume_class</strong> [volume class]</p>
</li>
<li>
<p>/<strong>physical_machine</strong> [ID of the physical machine that hosts the instance]</p>
</li>
<li>
<p>/<strong><em>role</em></strong> [role name]</p>
</li>
<li>
<p>/<strong><em>pub_key</em></strong> [pub key string]</p>
</li>
<li>
<p>/<strong><em>token</em></strong> [token string]</p>
</li>
<li>
<p>/<strong><em>reserved_ips</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[reserved IP name such as vip]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>value</strong> [reserved ip address]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>cluster</strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>app_id</strong> [application ID]</p>
</li>
<li>
<p>/<strong>cluster_id</strong> [cluster ID]</p>
</li>
<li>
<p>/<strong>user_id</strong> [application ID]</p>
</li>
<li>
<p>/<strong>global_uuid</strong> [global UUID]</p>
</li>
<li>
<p>/<strong>cluster_tag</strong> [cluster tag ID]</p>
</li>
<li>
<p>/<strong>vxnet</strong> [VxNet ID]</p>
</li>
<li>
<p>/<strong>zone</strong> [Zone ID]</p>
</li>
<li>
<p>/<strong><em>endpoints</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[service name]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>port</strong> [port or a reference to env parameter]</p>
</li>
<li>
<p>/<strong>protocol</strong> [protocol]</p>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong><em>reserved_ips</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[reserved IP name such as vip]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>value</strong> [reserved ip address]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong><em>api_server</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong><em>host</em></strong> [host of api server]</p>
</li>
<li>
<p>/<strong><em>port</em></strong> [port of api server]</p>
</li>
<li>
<p>/<strong><em>protocol</em></strong> [protocol of api server]</p>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong><em>resource_limits</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong><em>valid_volume_classes</em></strong> [comma-separated valid volume classes]</p>
</li>
<li>
<p>/<strong><em>valid_instance_classes</em></strong> [comma-separated valid instance classes]</p>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong><em>upgrade-audit</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong><em>from_app_version</em></strong> [App version]</p>
</li>
<li>
<p>/<strong><em>to_app_version</em></strong> [App version]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>env</strong>/[parameter key]* [parameter value]</p>
</li>
<li>
<p>/<strong>adding-hosts</strong>/<em>[role name]</em>/[instance_id]*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>ip</strong> [IP address]</p>
</li>
<li>
<p>/<strong>eip</strong> [public IP address]</p>
</li>
<li>
<p>/<strong>mac</strong> [MAC address]</p>
</li>
<li>
<p>/<strong>sid</strong> [server ID]</p>
</li>
<li>
<p>/<strong>gid</strong> [group ID]</p>
</li>
<li>
<p>/<strong>gsid</strong> [global server ID]</p>
</li>
<li>
<p>/<strong>node_id</strong> [node ID]</p>
</li>
<li>
<p>/<strong>instance_id</strong> [instance ID]</p>
</li>
<li>
<p>/<strong>cpu</strong> [cpu]</p>
</li>
<li>
<p>/<strong>gpu</strong> [gpu]</p>
</li>
<li>
<p>/<strong>memory</strong> [memory in MiB]</p>
</li>
<li>
<p>/<strong>volume_size</strong> [volume size in GiB]</p>
</li>
<li>
<p>/<strong>instance_class</strong> [instance class]</p>
</li>
<li>
<p>/<strong>gpu_class</strong> [gpu class]</p>
</li>
<li>
<p>/<strong>volume_class</strong> [volume class]</p>
</li>
<li>
<p>/<strong>physical_machine</strong> [ID of the physical machine that hosts the instance]</p>
</li>
<li>
<p>/<strong><em>role</em></strong> [role name]</p>
</li>
<li>
<p>/<strong><em>pub_key</em></strong> [pub key string]</p>
</li>
<li>
<p>/<strong><em>token</em></strong> [token string]</p>
</li>
<li>
<p>/<strong><em>reserved_ips</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[reserved IP name such as vip]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>value</strong> [reserved ip address]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>deleting-hosts</strong>/<em>[role name]</em>/[instance_id]*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>ip</strong> [IP address]</p>
</li>
<li>
<p>/<strong>eip</strong> [public IP address]</p>
</li>
<li>
<p>/<strong>mac</strong> [MAC address]</p>
</li>
<li>
<p>/<strong>sid</strong> [server ID]</p>
</li>
<li>
<p>/<strong>gid</strong> [group ID]</p>
</li>
<li>
<p>/<strong>gsid</strong> [global server ID]</p>
</li>
<li>
<p>/<strong>node_id</strong> [node ID]</p>
</li>
<li>
<p>/<strong>instance_id</strong> [instance ID]</p>
</li>
<li>
<p>/<strong>cpu</strong> [cpu]</p>
</li>
<li>
<p>/<strong>gpu</strong> [gpu]</p>
</li>
<li>
<p>/<strong>memory</strong> [memory in MiB]</p>
</li>
<li>
<p>/<strong>volume_size</strong> [volume size in GiB]</p>
</li>
<li>
<p>/<strong>instance_class</strong> [instance class]</p>
</li>
<li>
<p>/<strong>gpu_class</strong> [gpu class]</p>
</li>
<li>
<p>/<strong>volume_class</strong> [volume class]</p>
</li>
<li>
<p>/<strong>physical_machine</strong> [ID of the physical machine that hosts the instance]</p>
</li>
<li>
<p>/<strong><em>role</em></strong> [role name]</p>
</li>
<li>
<p>/<strong><em>pub_key</em></strong> [pub key string]</p>
</li>
<li>
<p>/<strong><em>token</em></strong> [token string]</p>
</li>
<li>
<p>/<strong><em>reserved_ips</em></strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>[reserved IP name such as vip]</strong>*</p>
<div class="ulist">
<ul>
<li>
<p>/<strong>value</strong> [reserved ip address]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>links</strong>/[service name]* [cluster_id]</p>
</li>
<li>
<p>/<strong>cmd</strong></p>
<div class="ulist">
<ul>
<li>
<p>/<strong>id</strong> [cmd ID]</p>
</li>
<li>
<p>/<strong>cmd</strong> [cmd string]</p>
</li>
<li>
<p>/<strong>timeout</strong> [timeout(second)]</p>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>vertical-scaling-roles</strong> [role names]</p>
</li>
</ul>
</div>
</li>
<li>
<p>/<strong>[cluster ID]</strong>*[与 self 平级目录，每个 cluster ID 目录下内容结构与 self 相同，self 通过软链接指向自己的 cluster ID]</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch admon note">
<colgroup>
<col style="width: 100%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>黑体字</strong>为固定 key，括号内为变量，<em>斜体字</em>为可选项，<strong><em>黑色斜体字</em></strong>表示此项为可选项，但如果有此项则为固定 key，右上角带*表示该项有 sibling (兄弟)节点。</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>元数据结构中根节点 self 表示发送请求的那个节点，metadata server 接到请求后返回该节点的相关信息，具体信息如下：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;"/>
<col style="width: 80%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hosts</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>hosts 分角色保存节点信息，如果没有角色，就直接保存在 hosts 之下。角色名称的定义来自 <a href="../specifications">云应用开发模板规范 - 完整版</a>里的定义。节点信息是一组以云服务器 ID (通常情况也是云服务器名，即以 i- 开头的字符串)为子目录组成，每个子目录下是此云服务器以 key-value 形式保存的详细信息。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ip</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点私有 IP 地址</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eip</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点绑定的公网 IP 地址，默认为空</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mac</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 mac 地址</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sid</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 server ID，云平台调度系统自动为每个节点分配的从1开始的整数。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gid</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 group ID，云平台调度系统自动为每个组分配的从1开始的整数，每一个节点和它的 replica 组成一个 group，即它们的 gid 相同，这个是为分片式分布式系统(多主多从，每个主和它的从为同一个组)提供的特性。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gsid</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 global server ID，云平台调度系统自动为每个节点分配的全球唯一的9位随机整数 ID。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node_id</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 node ID，云平台调度系统自动为每个节点分配的节点 ID，是一个以 cln- 开头的唯一标识，此 ID 不会变更。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance_id</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点云服务器 ID，云平台调度系统自动为每个节点分配的云服务器 ID，是一个以i-开头的唯一标识，此 ID 是云服务器的 hostname，每次启动都会变更，如关闭集群然后启动集群，该节点 instance ID 可能会变更。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cpu</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 CPU 核数</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点内存大小， 单位 MiB。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume_size</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点数据盘大小， 单位 GiB。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpu</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 GPU 显卡数</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance_class</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点类型，其中 0 表示性能云服务器，1 表示超高性能云服务器。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpu_class</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 gpu 显卡类型，其中 0 表示性能型 gpu。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume_class</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>数据盘类型，其中 0 表示性能盘，3 表示超高性能盘，2 表示容量盘。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">physical_machine</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点所在物理机标识符</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点角色名称</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pub_key</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点 passphraseless ssh 公钥</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点通过开发者自定义脚本在该云服务器里运行结果，详情参见<a href="../specifications">云应用开发模板规范 - 完整版</a>。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserved_ips</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>节点预留 ip 地址. 这个目录下开发者可以定义多个 reserved IP，比如 write_ip, read_ip 等等，名称开发者自行定义，value 对应的就是这个 reserved IP 的地址。</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>例：通过 /self/hosts/i-abcd2xyz/ip 可获取发起请求的节点所在集群中云服务器 ID 为 i-abcd2xyz 的 IP 地址；或通过 /self/hosts/master/i-abcd2xyz/ip 可获取发起请求的节点所在集群中云服务器 ID 为 i-abcd2xyz 的 IP 地址，而此节点是一个 master 节点。</p>
</div>
<table class="tableblock frame-all grid-all stretch admon note">
<colgroup>
<col style="width: 100%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>在制作镜像的时候由于 confd 会默认配置 prefix 为 /self，所以在镜像里获取信息时可以省略 /self，
比如上例可以直接通过 /hosts/i-abcd2xyz/ip 来获取这个节点的 IP 地址。
如果在<a href="../specifications">云应用开发模板规范 - 完整版</a>
里定义 metadata_root_access 为 true，则 confd 会配置 prefix为 /，
这个时候需要通过 /self/hosts/i-abcd2xyz/ip 来获取这个节点的 IP 地址。</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_host">host</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点私有 IP 地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">节点绑定的公网 IP 地址，默认为空</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 mac 地址</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 server ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 group ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gsid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 global server ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 node ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点云服务器 ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cpu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 CPU 核数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点内存大小</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume_size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点数据盘大小。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点节点 GPU 显卡数</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance_class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点类型。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpu_class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 gpu 显卡类型。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume_class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点数据盘类型。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">physical_machine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点所在物理机标识符</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点角色名称</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pub_key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点 passphraseless ssh 公钥</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点通过开发者自定义脚本在本云服务器里运行结果</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserved_ips</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">本节点预留 ip 地址. 这个目录下开发者可以定义多个 reserved IP，比如 write_ip, read_ip 等等，名称开发者自行定义，value 对应的就是这个 reserved IP 的地址。</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>例：通过 /self/host/ip 可获取自身节点的 IP 地址</p>
</div>
</div>
<div class="sect2">
<h3 id="_cluster">cluster</h3>
<div class="paragraph">
<p>cluster 保存跟集群相关的元信息，包括</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">app_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群所属的应用 ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群 ID，用户在创建应用的时候云平台调度系统自动生成的一个以 cl- 开头的唯一标识，如 cl-0u0a6u1j。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">用户 ID，创建该集群的用户，如 usr-5DJhqhIN。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">global_uuid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群全球唯一 ID，用户在进入部署应用页面时自动生成的全球唯一标识，这个 ID 可用于需要生成 licence 的应用使用。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster_tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群以及通过 api 创建的资源所绑定的 tag_id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vxnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群所在网络 ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">zone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群所在区域 ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endpoints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">应用供第三方使用的 endpoint 定义，service name 可在<a href="../specifications">云应用开发模板规范 - 完整版</a>中任意定义。如果一个第三方应用通过链接到本应用，那么就可以通过此功能 (例： /links/<em>link_name</em>/cluster/endpoints/<em>client</em>，假定开发者定义这个 endpoint 服务名为 client) 获取到本应用的 endpoint 信息。endpoint 下还可以定义 reserved_ips，这个目录下开发者可以定义多个 reserved IP，比如 write_ip, read_ip 等等，名称开发者自行定义，value 对应的就是这个 reserved IP 的地址。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">api_server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">集群内部可通过内网访问的 api server 信息, 包括 host，port，protocol。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resource_limits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">当前 zone 下所支持的资源类型，valid_volume_classes：逗号分隔的磁盘类型；valid_instance_classes：逗号分隔的云服务器类型。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upgrade-audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">升级操作时，临时保存升级版本信息，from_app_version：升级前版本 ID；to_app_version：升级后版本 ID。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_env">env</h3>
<div class="paragraph">
<p>env 保存用户可修改的应用参数，key 为参数名，value 为具体参数值。</p>
</div>
<div class="paragraph">
<p>例：Redis 节点可通过 /env/maxclients 获取用户配置的 maxclients 数值来更新 redis.conf</p>
</div>
<div class="paragraph">
<p>对于参数类型是 accesskey 的参数，在其原来目录下，云平台调度系统会添加 /access_key_id 和 /secret_access_key 两个子目录，分别存储 API 密钥ID 和私钥。</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_hosts">adding-hosts</h3>
<div class="paragraph">
<p>adding-hosts 临时保存新加入的节点信息，当 scale out (添加节点)操作完成之后这个子目录下的信息会随之消失。云服务器信息参见<a href="#_host">hosts</a>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_deleting_hosts">deleting-hosts</h3>
<div class="paragraph">
<p>deleting-hosts 临时保存即将删除的节点信息，当 scale in (删除节点)操作完成之后这个子目录下的信息会随之消失。云服务器信息参见<a href="#_host">hosts</a>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_links">links</h3>
<div class="paragraph">
<p>外部服务依赖定义，有些应用依赖于另外一个服务才能正常工作，如 Kafka 依赖于 ZooKeeper，因此此处需指定被依赖集群的 ID，service name 可在<a href="../specifications">云应用开发模板规范 - 完整版</a>中任意定义。</p>
</div>
</div>
<div class="sect2">
<h3 id="_cmd">cmd</h3>
<div class="paragraph">
<p>cmd 表示本节点需要执行的命令。开发者不需要用到这类信息，这是云平台调度系统转发并执行应用命令，如启动应用命令等。</p>
</div>
<table class="tableblock frame-all grid-all stretch admon note">
<colgroup>
<col style="width: 100%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>开发者只需要在模板中定义命令即可，详情参见<a href="../specifications">云应用开发模板规范 - 完整版</a>。</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertical-scaling-roles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">表示当前正在进行纵向扩容的角色节点名称，目前的扩容策略是每次扩容一类角色节点，所以 vertical-scaling-roles 的值通常即为角色名称，如 master ； 如果扩容的角色节点设置了 replica ，则此项值为扩容角色和其replica 角色，以逗号隔开，如 master,master-replica 。扩容完成后，此项值会从 metadata 中移除。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_测试">测试</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在创建好一个集群后，登录到任意一个节点，在文件 /etc/confd/confd.toml 里找到 nodes 这一行(这个文件是云平台调度系统在用户创建集群的时候自动生成的)，这一行定义的是 metadata server 的 IP 地址，任取一个 IP，运行下面命令即可看到所有信息。注明：同一 VPC 里所有集群这个文件内容相同。</p>
</div>
<div class="paragraph">
<p><code>curl http://[IP]/self</code></p>
</div>
<div class="paragraph">
<p>或者直接访问</p>
</div>
<div class="paragraph">
<p><code>curl http://metadata/self</code></p>
</div>
</div>
</div>

    

  </div>
  <div class="post-footer">
    <div class="post-prev">
    </div>
    <div class="post-next">
    </div>
  </div>
  <div class="post-back-to-top">
    <span class="icon-up_3_fill"></span>
  </div>
</div>
<div class="post-placeholder"><div class="post-menu">
  <div class="post-menu-title">本页目录</div>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#_基本信息">基本信息</a></li>
    <li><a href="#_元数据结构">元数据结构</a>
      <ul>
        <li><a href="#_host">host</a></li>
        <li><a href="#_cluster">cluster</a></li>
        <li><a href="#_env">env</a></li>
        <li><a href="#_adding_hosts">adding-hosts</a></li>
        <li><a href="#_deleting_hosts">deleting-hosts</a></li>
        <li><a href="#_links">links</a></li>
        <li><a href="#_cmd">cmd</a></li>
      </ul>
    </li>
    <li><a href="#_测试">测试</a></li>
  </ul>
</nav>
</div></div>
      </div>
    </div>
  </div>
</div></div>
    </body><script src="/js/bootstrap.min.js"></script>
<script src="/js/autocomplete/jquery.autocomplete.js"></script>
<script src="/js/copy-to-clipboard.js"></script>
<script src="/js/highlight.min.js"></script>
<script src="/js/jquery.tmpl.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/search/jquery.mark.min.js"></script>

<script type="text/javascript" src="/js/common.428b8a7f426567136e0501d49705f10dac2e4539d10c2f396d7c9ee45df1469eaa38e983928589e0e35ed30c1732ddbcda694ac0928ffffffee76b4a0017adf2.js" integrity="sha512-QouKf0JlZxNuBQHUlwXxDawuRTnRDC85bXye5F3xRp6qOOmDkoWJ4ONe0wwXMt282mlKwJKP///&#43;52tKABet8g=="></script>

<script type="text/javascript" src="/js/search.d8001c3e1b66b9a0b48e0c23ad0dbfc0906f194f8925ae78a9900b960679cfa7e41cebd9efd654f84535d02cbce7c4971f226e6f07288c26c3c4560c36d7655b.js"></script>
<script>
  $(function() {
    
    hljs.highlightAll();
    
    $.each($('.post-content .imageblock img'), function () {
      $(this).attr('data-mfp-src', $(this).attr('src'));
    });
    $('.post-content').magnificPopup({
      disableOn: function () {
        if ($(window).width() < 600) {
          return false;
        }
        return true;
      },
      delegate: '.imageblock img',
      type: 'image',
      gallery: {
        enabled: true,
      },
    });
  });
</script>
</html>
