<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>网络配置 on 用户指南</title>
    <link>/v6.1/compute/vm/faq/troubleshooting/network_config/</link>
    <description>Recent content in 网络配置 on 用户指南</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>©2022 QingCloud, Inc. All rights reserved</copyright><atom:link href="/v6.1/compute/vm/faq/troubleshooting/network_config/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>80 端口无法访问</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/check_port_80_worked/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/check_port_80_worked/</guid>
      <description>概述 本文主要介绍在不同操作系统中检查 TCP 80 端口是否正常工作的方法。
说明 以下文档是基于用户已经在云平台完成备案操作，关于未完成备案导致 80 端口无法访问，可以查看文档 为什么 80 端口被禁用。
排查思路 如果云服务器无法对外提供 HTTP 服务，可以按以下思路检查 Web 服务的端口（默认为 80 端口）是否正常工作。
登录管理控制台，选择 产品与服务 &amp;gt; 安全服务 &amp;gt; 安全组，进入安全组列表页面。确认云服务器绑定的安全组已经放行该端口。（如云服务器是通过 vpc 网络进行访问，则修改 vpc 绑定的安全组，并添加端口转发规则）
远程连接进入云服务器，确认 Web 服务已经开启。
确认端口正常被监听。如没有，请修改监听地址。
确认云服务器内部防火墙已经放行服务或端口。
若仍无法解决，可提交工单协助解决。
排查步骤示例 以下介绍 Windows 和 Linux 排查端口是否正常工作的方法，示例环境分别为：
Windows Server 2008
CentOS7.2
Windows Server 2008 示例以 iis 服务为例
确认已在云服务器绑定的安全组添加 80 端口下行规则，并应用修改。
如云服务器是通过vpc网络进行访问，则修改 vpc 绑定的安全组，并添加端口转发规则。
查看 IIS 服务是否已启动。
查看管理服务器是否启动，如未启动，请启动
查看网站服务是否启动，如未启动，请启动
查看端口是否已监听
打开 cmd 命令提示符，执行 netstat -ano | findstr :80 命令</description>
    </item>
    
    <item>
      <title>ping 不通或丢包时如何进行链路测试</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/check_ping/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/check_ping/</guid>
      <description>问题描述 在云服务器上访问其他网络资源时，出现网络卡顿。执行 ping 命令，存在丢包或时延过高的问题。
本节操作以 Tracert 和 MTR 工具为例，介绍如何诊断丢包或时延过高的网络问题根因。
原因分析 丢包或时延较高可能是链路拥塞、链路节点故障、服务器负载高、系统设置问题等原因引起。
在排除云服务器自身原因后，您可以使用 Tracert 或 MTR 工具进行进一步诊断。
使用网络诊断工具 MTR 可以帮助您确认网络问题的根因。
Windows 操作系统 Tracert 介绍和使用 Tracert 是路由跟踪程序， Tracert 命令用来显示数据包到达目标主机所经过的路径，并显示到达每个节点的时间。 Tracert 命令功能与 ping 命令类似，但获得的信息要比 ping 命令详细，它可以显示数据包所走的全部路径、节点的 IP 以及时间。
登录 Windows 云服务器。
打开 cmd 命令窗，执行以下命令跟踪 IP 地址。
tracert IP地址/网站地址 (例如：tracert www.example.com) 对数据节点分析如下：
Tracert 默认最大跳数30，第1列为起跳顺序号， Tracert 每次会发送三个数据包，第2、3、4列为对应三个数据包的返回时间，第5列为跳转的 IP 节点。假如某一层中出现了&amp;#34;`* * * request tinmed out`&amp;#34;，那么则需要定位这层的问题，可能这里导致连接不到目标节点。
Windows 操作系统 WinMTR 介绍和使用 登录 Windows 云服务器。
通过浏览器访问外网，搜索并下载 WinMTR 安装包。</description>
    </item>
    
    <item>
      <title>HTTPS 访问报错 400</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/httpserror/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/httpserror/</guid>
      <description>背景介绍 当服务器无法理解对它的请求时，会发生 400 Bad Request 错误。 之所以称为 400 错误，是因为这是 Web 服务器用来描述这种错误的 HTTP 状态代码。
解决方法 HTTP 和 HTTPS 交互的问题 如果负载均衡器配置的是 HTTP 的监听器，但是后端采用的是 HTTPS，Client 端访问就会出现 400 错误，如下提供两种解决方式供参考。
如果仍然想在后端配置了 SSL ，负载均衡器的监听器则需要改成 TCP 的方式
操作步骤：负载均衡器 &amp;gt; lb-xxxxxxx，进入负载均衡器后修改监听器。
如果后端采用 HTTP，负载均衡器创建 HTTPS 监听器，HTTPS 监听器加载 SSL 证书，由 LB 来做 SSL 证书的加载和卸载
操作步骤：负载均衡器 &amp;gt; lb-xxxxxxx &amp;gt; 创建监听器 ，HTTPS模板如下图。
仔细检查地址 出现 400 错误的最常见原因是网址输入错误。 如果您自己在地址栏中输入了 URL，则可能输入错误。如果单击另一个网页上的链接并显示404错误，则也有可能在链接页面上键入了错误的链接。检查地址，看看是否发现任何明显的错误。 另外，请检查URL中的特殊符号，尤其是您在 URL 中通常看不到的特殊符号。
清除浏览器的Cookie和缓存 许多网站报告 400 错误，因为它们正在读取的 Cookie 损坏或过旧。 某些浏览器扩展程序也可能会更改 Cookie，并导致 400 错误。您的浏览器也可能缓存了您试图打开的页面的损坏版本,操作步骤浏览器右上角处 &amp;gt; 更多工具 &amp;gt; 清除浏览数据 &amp;gt; 清除数据</description>
    </item>
    
    <item>
      <title>resolv 文件的 DNS 被重置怎么办？</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/reset_dns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/reset_dns/</guid>
      <description> 概述 编辑 /etc/resolv.conf 文件，修改 DNS 。重启服务器后，DNS 被还原为之前默认的 DNS 配置。具体解决方式参考以下方法。
解决方法 关闭 NetworkManager
# systemctl stop NetworkManager.service # systemctl disable NetworkManager 修改网卡配置，增加 PEERDNS=no 参数
vi /etc/sysconfig/network-scripts/ifcfg-eth0 PEERDNS=no </description>
    </item>
    
    <item>
      <title>访问国外网站加载缓慢怎么？</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/foreign_website/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/foreign_website/</guid>
      <description>问题背景 这是由于服务器位于中国大陆，访问的网站为国外，访问加载时解析的 IP 首选为国际带宽线路，而国际带宽线路分布在全球各地。访问的过程中不可避免的会出现饶节的情况，因此增加了访问加载的时间。
解决方法 使用非中国大陆地区资源 如您有访问中国大陆外网站的需求，建议使用亚太2区或者雅加达区资源，该区域位于其他海外，更适合有海外访问需求的客户。
修改DNS 在不方便更换海外区域的情况下，可以修改 DNS 解决，如将 DNS 服务器 IP 修改为 114.114.114.114 或 8.8.8.8
以下为 CentOS 7 修改方法：
# vi /etc/resolv.conf # Generated by NetworkManager search localdomain. pek3.domain.com. nameserver 8.8.8.8 nameserver 114.114.114.114 其他方法 使用 ping 命令判断访问速度最快的服务器 IP 地址
以下示例为 Windows 访问 GitHub 为例，CMD 命令行中 ping github.com 域名地址
C:\Users\Administrator&amp;gt;ping github.com 正在 Ping github.com [13.250.177.223] 具有 32 字节的数据: 来自 13.250.177.223 的回复: 字节=32 时间=81ms TTL=36 来自 13.250.177.223 的回复: 字节=32 时间=94ms TTL=36 来自 13.</description>
    </item>
    
    <item>
      <title>公网 IP 带宽占用高</title>
      <link>/v6.1/compute/vm/faq/troubleshooting/network_config/ip_traffic_-problems/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v6.1/compute/vm/faq/troubleshooting/network_config/ip_traffic_-problems/</guid>
      <description>解决方法 检查公网 IP 带宽 登录管理控制台，在公网 IP 监控中开启实时数据，查看当前一小时实时监控数据是否有异常升高，带宽被占满的情况。
如带宽有占满情况，可以继续查看绑定的 VPC 或者云服务器网卡流量监控。
如下是 VPC 网络监控，在 VPC 监控中查看私有网络的网卡监控数据，我们可以发现私有网络下资源进出流量数据，找到流量较高资源，排查是否为对外提供服务的资源，如果是可以参考下面云服务器排查方法，排查云服务器原因。
Windows 服务器排查方法 我们按照上面查看网络监控的方法，基本可定位到引起带宽占用高的云服务器，然后控制台VNC登录到云服务器排查。
云服务器中，选择 任务管理器，打开 任务管理器 窗口
选择 性能 页签，单击 打开资源监视器。如下图所示:
打开的 资源监视器 中，查看消耗带宽较多的进程，并根据您的实际业务，判断此进程是否正常。如下图所示：
如果消耗带宽较多的进程为业务进程，则需要分析是否由于访问量变化引起，是否需要优化空间或者 升级服务器配置。
如果消耗带宽较多的进程为异常进程，可能是病毒或木马导致，您可以自行终止进程或者使用安全软件进行查杀，也可以对数据备份后，重置系统。
Linux 服务器排查方法 我们按照上面查看网络监控的方法，基本可定位到引起带宽占用高的云服务器，然后控制台VNC登录到云服务器排查。
执行命令，安装 iftop 工具。
yum install iftop -y 执行命令，安装 lsof。
yum install lsof -y 执行命令，运行 iftop。如下图所示：
iftop o&amp;lt;=、=&amp;gt; 表示流量的方向 oTX 表示发送流量 oRX 表示接收流量 oTOTAL 表示总流量 oCum 表示运行 iftop 到目前时间的总流量 opeak 表示流量峰值 orates 分别表示过去2s、10s和40s的平均流量 根据 iftop 中消耗流量的 IP，执行命令，查看连接该 IP 的进程。</description>
    </item>
    
  </channel>
</rss>
